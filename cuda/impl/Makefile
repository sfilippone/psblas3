include ../../Make.inc
LIBDIR=../../lib
INCDIR=../../include
MODDIR=../../modules
PSBLAS_LIB= -L$(PSBLIBDIR)  -lpsb_util  -lpsb_base
#-lpsb_util -lpsb_krylov -lpsb_prec -lpsb_base 
LDLIBS=$(PSBLDLIBS)
#
# Compilers and such
#
#CCOPT= -g
FINCLUDES=$(FMFLAG)..  $(FMFLAG)$(MODDIR) $(FMFLAG)$(INCDIR) $(FIFLAG)..
CINCLUDES=-I$(GPU_INCDIR) -I$(CUDA_INCDIR)
LIBNAME=libpsb_gpu.a
CXXDEFINES=$(PSBCXXDEFINES) $(SPGPU_DEFINES) $(CUDA_DEFINES)
CDEFINES=$(PSBCDEFINES) $(SPGPU_DEFINES) $(CUDA_DEFINES)
FDEFINES=$(PSBFDEFINES) $(SPGPU_DEFINES) $(CUDA_DEFINES)

OBJS= \
psb_d_cuda_cp_csrg_from_coo.o \
psb_d_cuda_cp_csrg_from_fmt.o \
psb_d_cuda_cp_elg_from_coo.o \
psb_d_cuda_cp_elg_from_fmt.o \
psb_s_cuda_cp_csrg_from_coo.o \
psb_s_cuda_cp_csrg_from_fmt.o \
psb_s_cuda_csrg_allocate_mnnz.o \
psb_s_cuda_csrg_csmm.o \
psb_s_cuda_csrg_csmv.o \
psb_s_cuda_csrg_mold.o \
psb_s_cuda_csrg_reallocate_nz.o \
psb_s_cuda_csrg_scal.o \
psb_s_cuda_csrg_scals.o \
psb_s_cuda_csrg_from_gpu.o \
psb_s_cuda_csrg_to_gpu.o \
psb_s_cuda_csrg_vect_mv.o \
psb_s_cuda_csrg_inner_vect_sv.o \
psb_d_cuda_csrg_allocate_mnnz.o \
psb_d_cuda_csrg_csmm.o \
psb_d_cuda_csrg_csmv.o \
psb_d_cuda_csrg_mold.o \
psb_d_cuda_csrg_reallocate_nz.o \
psb_d_cuda_csrg_scal.o \
psb_d_cuda_csrg_scals.o \
psb_d_cuda_csrg_from_gpu.o \
psb_d_cuda_csrg_to_gpu.o \
psb_d_cuda_csrg_vect_mv.o \
psb_d_cuda_csrg_inner_vect_sv.o \
psb_d_cuda_elg_allocate_mnnz.o \
psb_d_cuda_elg_asb.o \
psb_d_cuda_elg_csmm.o \
psb_d_cuda_elg_csmv.o \
psb_d_cuda_elg_csput.o \
psb_d_cuda_elg_from_gpu.o \
psb_d_cuda_elg_inner_vect_sv.o \
psb_d_cuda_elg_mold.o \
psb_d_cuda_elg_reallocate_nz.o \
psb_d_cuda_elg_scal.o \
psb_d_cuda_elg_scals.o \
psb_d_cuda_elg_to_gpu.o \
psb_d_cuda_elg_vect_mv.o \
psb_d_cuda_mv_csrg_from_coo.o \
psb_d_cuda_mv_csrg_from_fmt.o \
psb_d_cuda_mv_elg_from_coo.o \
psb_d_cuda_mv_elg_from_fmt.o \
psb_s_cuda_mv_csrg_from_coo.o \
psb_s_cuda_mv_csrg_from_fmt.o \
psb_s_cuda_cp_elg_from_coo.o \
psb_s_cuda_cp_elg_from_fmt.o \
psb_s_cuda_elg_allocate_mnnz.o \
psb_s_cuda_elg_asb.o \
psb_s_cuda_elg_csmm.o \
psb_s_cuda_elg_csmv.o \
psb_s_cuda_elg_csput.o \
psb_s_cuda_elg_inner_vect_sv.o \
psb_s_cuda_elg_mold.o \
psb_s_cuda_elg_reallocate_nz.o \
psb_s_cuda_elg_scal.o \
psb_s_cuda_elg_scals.o \
psb_s_cuda_elg_to_gpu.o \
psb_s_cuda_elg_from_gpu.o \
psb_s_cuda_elg_vect_mv.o \
psb_s_cuda_mv_elg_from_coo.o \
psb_s_cuda_mv_elg_from_fmt.o \
psb_s_cuda_cp_hlg_from_fmt.o \
psb_s_cuda_cp_hlg_from_coo.o \
psb_d_cuda_cp_hlg_from_fmt.o \
psb_d_cuda_cp_hlg_from_coo.o \
psb_d_cuda_hlg_allocate_mnnz.o \
psb_d_cuda_hlg_csmm.o \
psb_d_cuda_hlg_csmv.o \
psb_d_cuda_hlg_inner_vect_sv.o \
psb_d_cuda_hlg_mold.o \
psb_d_cuda_hlg_reallocate_nz.o \
psb_d_cuda_hlg_scal.o \
psb_d_cuda_hlg_scals.o \
psb_d_cuda_hlg_from_gpu.o \
psb_d_cuda_hlg_to_gpu.o \
psb_d_cuda_hlg_vect_mv.o \
psb_s_cuda_hlg_allocate_mnnz.o \
psb_s_cuda_hlg_csmm.o \
psb_s_cuda_hlg_csmv.o \
psb_s_cuda_hlg_inner_vect_sv.o \
psb_s_cuda_hlg_mold.o \
psb_s_cuda_hlg_reallocate_nz.o \
psb_s_cuda_hlg_scal.o \
psb_s_cuda_hlg_scals.o \
psb_s_cuda_hlg_from_gpu.o \
psb_s_cuda_hlg_to_gpu.o \
psb_s_cuda_hlg_vect_mv.o \
psb_s_cuda_mv_hlg_from_coo.o \
psb_s_cuda_cp_hlg_from_coo.o \
psb_s_cuda_mv_hlg_from_fmt.o \
psb_d_cuda_mv_hlg_from_coo.o \
psb_d_cuda_cp_hlg_from_coo.o \
psb_d_cuda_mv_hlg_from_fmt.o \
psb_s_cuda_hybg_allocate_mnnz.o \
psb_s_cuda_hybg_csmm.o \
psb_s_cuda_hybg_csmv.o \
psb_s_cuda_hybg_reallocate_nz.o \
psb_s_cuda_hybg_scal.o \
psb_s_cuda_hybg_scals.o \
psb_s_cuda_hybg_to_gpu.o \
psb_s_cuda_hybg_vect_mv.o \
psb_s_cuda_hybg_inner_vect_sv.o \
psb_s_cuda_cp_hybg_from_coo.o \
psb_s_cuda_cp_hybg_from_fmt.o \
psb_s_cuda_mv_hybg_from_fmt.o \
psb_s_cuda_mv_hybg_from_coo.o \
psb_s_cuda_hybg_mold.o \
psb_d_cuda_hybg_allocate_mnnz.o \
psb_d_cuda_hybg_csmm.o \
psb_d_cuda_hybg_csmv.o \
psb_d_cuda_hybg_reallocate_nz.o \
psb_d_cuda_hybg_scal.o \
psb_d_cuda_hybg_scals.o \
psb_d_cuda_hybg_to_gpu.o \
psb_d_cuda_hybg_vect_mv.o \
psb_d_cuda_hybg_inner_vect_sv.o \
psb_d_cuda_cp_hybg_from_coo.o \
psb_d_cuda_cp_hybg_from_fmt.o \
psb_d_cuda_mv_hybg_from_fmt.o \
psb_d_cuda_mv_hybg_from_coo.o \
psb_d_cuda_hybg_mold.o \
psb_z_cuda_cp_csrg_from_coo.o \
psb_z_cuda_cp_csrg_from_fmt.o \
psb_z_cuda_cp_elg_from_coo.o \
psb_z_cuda_cp_elg_from_fmt.o \
psb_c_cuda_cp_csrg_from_coo.o \
psb_c_cuda_cp_csrg_from_fmt.o \
psb_c_cuda_csrg_allocate_mnnz.o \
psb_c_cuda_csrg_csmm.o \
psb_c_cuda_csrg_csmv.o \
psb_c_cuda_csrg_mold.o \
psb_c_cuda_csrg_reallocate_nz.o \
psb_c_cuda_csrg_scal.o \
psb_c_cuda_csrg_scals.o \
psb_c_cuda_csrg_from_gpu.o \
psb_c_cuda_csrg_to_gpu.o \
psb_c_cuda_csrg_vect_mv.o \
psb_c_cuda_csrg_inner_vect_sv.o \
psb_z_cuda_csrg_allocate_mnnz.o \
psb_z_cuda_csrg_csmm.o \
psb_z_cuda_csrg_csmv.o \
psb_z_cuda_csrg_mold.o \
psb_z_cuda_csrg_reallocate_nz.o \
psb_z_cuda_csrg_scal.o \
psb_z_cuda_csrg_scals.o \
psb_z_cuda_csrg_from_gpu.o \
psb_z_cuda_csrg_to_gpu.o \
psb_z_cuda_csrg_vect_mv.o \
psb_z_cuda_csrg_inner_vect_sv.o \
psb_z_cuda_elg_allocate_mnnz.o \
psb_z_cuda_elg_asb.o \
psb_z_cuda_elg_csmm.o \
psb_z_cuda_elg_csmv.o \
psb_z_cuda_elg_csput.o \
psb_z_cuda_elg_inner_vect_sv.o \
psb_z_cuda_elg_mold.o \
psb_z_cuda_elg_reallocate_nz.o \
psb_z_cuda_elg_scal.o \
psb_z_cuda_elg_scals.o \
psb_z_cuda_elg_to_gpu.o \
psb_z_cuda_elg_from_gpu.o \
psb_z_cuda_elg_vect_mv.o \
psb_z_cuda_mv_csrg_from_coo.o \
psb_z_cuda_mv_csrg_from_fmt.o \
psb_z_cuda_mv_elg_from_coo.o \
psb_z_cuda_mv_elg_from_fmt.o \
psb_c_cuda_mv_csrg_from_coo.o \
psb_c_cuda_mv_csrg_from_fmt.o \
psb_c_cuda_cp_elg_from_coo.o \
psb_c_cuda_cp_elg_from_fmt.o \
psb_c_cuda_elg_allocate_mnnz.o \
psb_c_cuda_elg_asb.o \
psb_c_cuda_elg_csmm.o \
psb_c_cuda_elg_csmv.o \
psb_c_cuda_elg_csput.o \
psb_c_cuda_elg_inner_vect_sv.o \
psb_c_cuda_elg_mold.o \
psb_c_cuda_elg_reallocate_nz.o \
psb_c_cuda_elg_scal.o \
psb_c_cuda_elg_scals.o \
psb_c_cuda_elg_to_gpu.o \
psb_c_cuda_elg_from_gpu.o \
psb_c_cuda_elg_vect_mv.o \
psb_c_cuda_mv_elg_from_coo.o \
psb_c_cuda_mv_elg_from_fmt.o \
psb_c_cuda_cp_hlg_from_fmt.o \
psb_c_cuda_cp_hlg_from_coo.o \
psb_z_cuda_cp_hlg_from_fmt.o \
psb_z_cuda_cp_hlg_from_coo.o \
psb_z_cuda_hlg_allocate_mnnz.o \
psb_z_cuda_hlg_csmm.o \
psb_z_cuda_hlg_csmv.o \
psb_z_cuda_hlg_inner_vect_sv.o \
psb_z_cuda_hlg_mold.o \
psb_z_cuda_hlg_reallocate_nz.o \
psb_z_cuda_hlg_scal.o \
psb_z_cuda_hlg_scals.o \
psb_z_cuda_hlg_from_gpu.o \
psb_z_cuda_hlg_to_gpu.o \
psb_z_cuda_hlg_vect_mv.o \
psb_c_cuda_hlg_allocate_mnnz.o \
psb_c_cuda_hlg_csmm.o \
psb_c_cuda_hlg_csmv.o \
psb_c_cuda_hlg_inner_vect_sv.o \
psb_c_cuda_hlg_mold.o \
psb_c_cuda_hlg_reallocate_nz.o \
psb_c_cuda_hlg_scal.o \
psb_c_cuda_hlg_scals.o \
psb_c_cuda_hlg_from_gpu.o \
psb_c_cuda_hlg_to_gpu.o \
psb_c_cuda_hlg_vect_mv.o \
psb_c_cuda_mv_hlg_from_coo.o \
psb_c_cuda_cp_hlg_from_coo.o \
psb_c_cuda_mv_hlg_from_fmt.o \
psb_z_cuda_mv_hlg_from_coo.o \
psb_z_cuda_cp_hlg_from_coo.o \
psb_z_cuda_mv_hlg_from_fmt.o \
psb_c_cuda_hybg_allocate_mnnz.o \
psb_c_cuda_hybg_csmm.o \
psb_c_cuda_hybg_csmv.o \
psb_c_cuda_hybg_reallocate_nz.o \
psb_c_cuda_hybg_scal.o \
psb_c_cuda_hybg_scals.o \
psb_c_cuda_hybg_to_gpu.o \
psb_c_cuda_hybg_vect_mv.o \
psb_c_cuda_hybg_inner_vect_sv.o \
psb_c_cuda_cp_hybg_from_coo.o \
psb_c_cuda_cp_hybg_from_fmt.o \
psb_c_cuda_mv_hybg_from_fmt.o \
psb_c_cuda_mv_hybg_from_coo.o \
psb_c_cuda_hybg_mold.o \
psb_z_cuda_hybg_allocate_mnnz.o \
psb_z_cuda_hybg_csmm.o \
psb_z_cuda_hybg_csmv.o \
psb_z_cuda_hybg_reallocate_nz.o \
psb_z_cuda_hybg_scal.o \
psb_z_cuda_hybg_scals.o \
psb_z_cuda_hybg_to_gpu.o \
psb_z_cuda_hybg_vect_mv.o \
psb_z_cuda_hybg_inner_vect_sv.o \
psb_z_cuda_cp_hybg_from_coo.o \
psb_z_cuda_cp_hybg_from_fmt.o \
psb_z_cuda_mv_hybg_from_fmt.o \
psb_z_cuda_mv_hybg_from_coo.o \
psb_z_cuda_hybg_mold.o \
psb_d_cuda_cp_diag_from_coo.o \
psb_d_cuda_mv_diag_from_coo.o \
psb_d_cuda_diag_to_gpu.o \
psb_d_cuda_diag_csmv.o \
psb_d_cuda_diag_mold.o \
psb_d_cuda_diag_vect_mv.o \
psb_d_cuda_cp_hdiag_from_coo.o \
psb_d_cuda_mv_hdiag_from_coo.o \
psb_d_cuda_hdiag_to_gpu.o \
psb_d_cuda_hdiag_csmv.o \
psb_d_cuda_hdiag_csmm.o \
psb_d_cuda_hdiag_mold.o \
psb_d_cuda_hdiag_vect_mv.o \
psb_s_cuda_cp_hdiag_from_coo.o \
psb_s_cuda_mv_hdiag_from_coo.o \
psb_s_cuda_hdiag_to_gpu.o \
psb_s_cuda_hdiag_csmv.o \
psb_s_cuda_hdiag_csmm.o \
psb_s_cuda_hdiag_mold.o \
psb_s_cuda_hdiag_vect_mv.o \
psb_s_cuda_dnsg_mat_impl.o \
psb_d_cuda_dnsg_mat_impl.o \
psb_c_cuda_dnsg_mat_impl.o \
psb_z_cuda_dnsg_mat_impl.o \
psb_z_cuda_hdiag_csmv.o \
psb_z_cuda_hdiag_csmm.o \
psb_z_cuda_hdiag_vect_mv.o \
psb_c_cuda_hdiag_csmv.o \
psb_c_cuda_hdiag_csmm.o \
psb_c_cuda_hdiag_vect_mv.o

objs: $(OBJS)
lib:  objs
	ar cur ../$(LIBNAME) $(OBJS)

clean:
	/bin/rm -f $(OBJS)
